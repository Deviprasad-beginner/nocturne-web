# Environment Variables for Nocturne

## Required Environment Variables

### Backend (Server)
```bash
# Database Connection
DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require

# Session Security (MUST be changed in production!)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=your_super_secret_session_key_change_this_in_production

# Environment
NODE_ENV=production
```

### Frontend (Client)
```bash
# Firebase Configuration (Optional - has fallback values)
VITE_FIREBASE_API_KEY=your_firebase_api_key
VITE_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your_project_id
VITE_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
VITE_FIREBASE_APP_ID=your_app_id

# Google Gemini API Configuration (Required for AI Reflection feature)
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-pro
```

## Setting Environment Variables on Render

1. Go to your Render dashboard
2. Select your web service
3. Click on "Environment" in the left sidebar
4. Add each environment variable with "Add Environment Variable" button
5. **Important**: After adding variables, click "Save Changes" and Render will automatically redeploy

### Quick Reference for Render

| Variable | Value | Notes |
|----------|-------|-------|
| `DATABASE_URL` | Your Neon PostgreSQL URL | Already in your `.env` file |
| `SESSION_SECRET` | Random 64-char string | **Generate a new one!** |
| `NODE_ENV` | `production` | Enables production optimizations |

## Generating a Secure SESSION_SECRET

Run this command locally to generate a secure secret:

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

Copy the output and use it as your `SESSION_SECRET` in Render.

## Verifying Environment Variables

After deployment, check the Render logs to ensure variables are loaded:
- Look for "Environment: production" message
- Check for any warnings about missing environment variables
- Verify database connection succeeds

## Security Notes

⚠️ **NEVER commit `.env` files to Git!**
⚠️ **Change SESSION_SECRET from the default value!**
⚠️ **Use strong database passwords with special characters**
